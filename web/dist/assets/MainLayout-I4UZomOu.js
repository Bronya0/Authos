import{j as m,c as p,o as u,d as s,b as F,u as J,k as Q,r as W,y as w,G as o,N as a,H as X,l as Y,M as Z,g as ee,O as y,w as t,f as i,m as x,e,h as l,i as M,t as k,P as oe}from"./index-Bh7ncf5g.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as ne}from"./People-CGTlNZ2w.js";import{P as le}from"./Person-D3lXNcJi.js";import{L as C}from"./List-ANkTgYCm.js";import{K as ae}from"./Key-Cuo-08Zj.js";import{S as se}from"./ShieldCheckmark-DJZpUdrC.js";import{A as re}from"./Apps-BMKE-_E8.js";import{P as ce,L as ie}from"./PersonCircle-BUYz5U4G.js";const ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},de=s("path",{d:"M202.24 74C166.11 56.75 115.61 48.3 48 48a31.36 31.36 0 0 0-17.92 5.33A32 32 0 0 0 16 79.9V366c0 19.34 13.76 33.93 32 33.93c71.07 0 142.36 6.64 185.06 47a4.11 4.11 0 0 0 6.94-3V106.82a15.89 15.89 0 0 0-5.46-12A143 143 0 0 0 202.24 74z",fill:"currentColor"},null,-1),pe=s("path",{d:"M481.92 53.3A31.33 31.33 0 0 0 464 48c-67.61.3-118.11 8.71-154.24 26a143.31 143.31 0 0 0-32.31 20.78a15.93 15.93 0 0 0-5.45 12v337.13a3.93 3.93 0 0 0 6.68 2.81c25.67-25.5 70.72-46.82 185.36-46.81a32 32 0 0 0 32-32v-288a32 32 0 0 0-14.12-26.61z",fill:"currentColor"},null,-1),_e=[de,pe],he=m({name:"Book",render:function(r,c){return u(),p("svg",ue,_e)}}),me={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},fe=s("path",{d:"M264 480A232 232 0 0 1 32 248c0-94 54-178.28 137.61-214.67a16 16 0 0 1 21.06 21.06C181.07 76.43 176 104.66 176 136c0 110.28 89.72 200 200 200c31.34 0 59.57-5.07 81.61-14.67a16 16 0 0 1 21.06 21.06C442.28 426 358 480 264 480z",fill:"currentColor"},null,-1),ge=[fe],we=m({name:"Moon",render:function(r,c){return u(),p("svg",me,ge)}}),ye={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ke=s("path",{d:"M320 146s24.36-12-64-12a160 160 0 1 0 160 160",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32"},null,-1),ve=s("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 58l80 80l-80 80"},null,-1),xe=[ke,ve],Ce=m({name:"Refresh",render:function(r,c){return u(),p("svg",ye,xe)}}),Ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},be=s("path",{d:"M425.7 118.25A240 240 0 0 0 76.32 447l.18.2c.33.35.64.71 1 1.05c.74.84 1.58 1.79 2.57 2.78a41.17 41.17 0 0 0 60.36-.42a157.13 157.13 0 0 1 231.26 0a41.18 41.18 0 0 0 60.65.06l3.21-3.5l.18-.2a239.93 239.93 0 0 0-10-328.76zM240 128a16 16 0 0 1 32 0v32a16 16 0 0 1-32 0zM128 304H96a16 16 0 0 1 0-32h32a16 16 0 0 1 0 32zm48.8-95.2a16 16 0 0 1-22.62 0l-22.63-22.62a16 16 0 0 1 22.63-22.63l22.62 22.63a16 16 0 0 1 0 22.62zm149.3 23.1l-47.5 75.5a31 31 0 0 1-7 7a30.11 30.11 0 0 1-35-49l75.5-47.5a10.23 10.23 0 0 1 11.7 0a10.06 10.06 0 0 1 2.3 14zm31.72-23.1a16 16 0 0 1-22.62-22.62l22.62-22.63a16 16 0 0 1 22.63 22.63zm65.88 227.6zM416 304h-32a16 16 0 0 1 0-32h32a16 16 0 0 1 0 32z",fill:"currentColor"},null,-1),Me=[be],z=m({name:"Speedometer",render:function(r,c){return u(),p("svg",Ae,Me)}}),ze={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ie=F('<path d="M256 118a22 22 0 0 1-22-22V48a22 22 0 0 1 44 0v48a22 22 0 0 1-22 22z" fill="currentColor"></path><path d="M256 486a22 22 0 0 1-22-22v-48a22 22 0 0 1 44 0v48a22 22 0 0 1-22 22z" fill="currentColor"></path><path d="M369.14 164.86a22 22 0 0 1-15.56-37.55l33.94-33.94a22 22 0 0 1 31.11 31.11l-33.94 33.94a21.93 21.93 0 0 1-15.55 6.44z" fill="currentColor"></path><path d="M108.92 425.08a22 22 0 0 1-15.55-37.56l33.94-33.94a22 22 0 1 1 31.11 31.11l-33.94 33.94a21.94 21.94 0 0 1-15.56 6.45z" fill="currentColor"></path><path d="M464 278h-48a22 22 0 0 1 0-44h48a22 22 0 0 1 0 44z" fill="currentColor"></path><path d="M96 278H48a22 22 0 0 1 0-44h48a22 22 0 0 1 0 44z" fill="currentColor"></path><path d="M403.08 425.08a21.94 21.94 0 0 1-15.56-6.45l-33.94-33.94a22 22 0 0 1 31.11-31.11l33.94 33.94a22 22 0 0 1-15.55 37.56z" fill="currentColor"></path><path d="M142.86 164.86a21.89 21.89 0 0 1-15.55-6.44l-33.94-33.94a22 22 0 0 1 31.11-31.11l33.94 33.94a22 22 0 0 1-15.56 37.55z" fill="currentColor"></path><path d="M256 358a102 102 0 1 1 102-102a102.12 102.12 0 0 1-102 102z" fill="currentColor"></path>',9),Le=[Ie],Se=m({name:"Sunny",render:function(r,c){return u(),p("svg",ze,Le)}}),$e={class:"sidebar-header"},Be={key:0,class:"sidebar-title"},Pe={class:"header-content"},De={class:"header-left"},Ve={class:"header-center"},Ne={class:"header-right"},Ue={__name:"MainLayout",setup(_){const r=ee(),c=X(),n=J(),v=Q(),h=W(!1),I=ce,L=w(()=>n.isAppLoggedIn?[{label:"仪表盘",key:"Dashboard",icon:()=>o(a,null,{default:()=>o(z)})},{label:"用户管理",key:"Users",icon:()=>o(a,null,{default:()=>o(ne)})},{label:"角色管理",key:"Roles",icon:()=>o(a,null,{default:()=>o(le)})},{label:"菜单管理",key:"Menus",icon:()=>o(a,null,{default:()=>o(C)})},{label:"权限配置",key:"Permissions",icon:()=>o(a,null,{default:()=>o(ae)})},{label:"配置字典",key:"ConfigDictionaries",icon:()=>o(a,null,{default:()=>o(C)})},{label:"审计日志",key:"AuditLogs",icon:()=>o(a,null,{default:()=>o(C)})},{label:"接口文档",key:"ApiDocs",icon:()=>o(a,null,{default:()=>o(he)})}]:[{label:"仪表盘",key:"Dashboard",icon:()=>o(a,null,{default:()=>o(z)})}]),S=[{label:"退出登录",key:"logout",icon:()=>o(a,null,{default:()=>o(ie)})}],$=w(()=>c.name),B=w(()=>{var d;return((d=c.meta)==null?void 0:d.title)||"Authos"}),P=w(()=>n.systemUser&&n.systemUser.username?n.systemUser.username:"Admin"),D=d=>{r.push({name:d})},V=()=>{v.showLoading(),r.go(0),setTimeout(()=>v.hideLoading(),500)},N=()=>{confirm("确定要切换应用吗？当前的操作可能会被中断。")&&(n.clearAppAuth(),r.push("/app-selection"))},U=d=>{d==="logout"&&confirm("确定要退出登录吗？")&&(n.logout(),v.clearCurrentApp(),r.push("/system-login"))};return Y(()=>{Z(()=>{if(console.log("检查认证状态:",{isSystemLoggedIn:n.isSystemLoggedIn,isAppLoggedIn:n.isAppLoggedIn,currentApp:n.currentApp,currentPath:c.path}),!n.isSystemLoggedIn&&c.path!=="/system-login"){console.log("跳转到系统登录页面"),r.push("/system-login");return}n.isSystemLoggedIn&&!n.isAppLoggedIn&&c.path!=="/app-selection"&&c.path!=="/app-login"&&(console.log("跳转到应用选择页面"),r.push("/app-selection"))})}),(d,f)=>{const R=i("n-menu"),T=i("n-layout-sider"),q=i("n-breadcrumb-item"),O=i("n-breadcrumb"),g=i("n-button"),A=i("n-space"),H=i("n-dropdown"),K=i("n-layout-header"),j=i("router-view"),E=i("n-layout-content"),b=i("n-layout");return u(),y(b,{class:"main-layout","has-sider":""},{default:t(()=>[l(n).isAppLoggedIn?(u(),y(T,{key:0,bordered:"","collapse-mode":"width","collapsed-width":64,width:240,collapsed:h.value,"show-trigger":"",onCollapse:f[0]||(f[0]=G=>h.value=!0),onExpand:f[1]||(f[1]=G=>h.value=!1)},{default:t(()=>[s("div",$e,[e(l(a),{size:"24",color:"#1890ff"},{default:t(()=>[e(l(se))]),_:1}),h.value?x("",!0):(u(),p("span",Be,"Authos"))]),e(R,{collapsed:h.value,"collapsed-width":64,"collapsed-icon-size":22,options:L.value,value:$.value,"onUpdate:value":D},null,8,["collapsed","options","value"])]),_:1},8,["collapsed"])):x("",!0),e(b,null,{default:t(()=>[e(K,{bordered:"",class:"layout-header"},{default:t(()=>[s("div",Pe,[s("div",De,[e(O,null,{default:t(()=>[e(q,null,{default:t(()=>[M(k(B.value),1)]),_:1})]),_:1})]),s("div",Ve,[l(n).isAppLoggedIn&&l(n).currentApp?(u(),y(g,{key:0,quaternary:"",onClick:N},{icon:t(()=>[e(l(a),null,{default:t(()=>[e(l(re))]),_:1})]),default:t(()=>[M(" 应用管理中心："+k(l(n).currentApp.name)+" ("+k(l(n).currentApp.code)+") ",1)]),_:1})):x("",!0)]),s("div",Ne,[e(A,{size:4},{default:t(()=>[e(g,{quaternary:"",circle:"",onClick:V},{icon:t(()=>[e(l(a),null,{default:t(()=>[e(l(Ce))]),_:1})]),_:1}),e(g,{quaternary:"",circle:"",onClick:l(n).toggleTheme},{icon:t(()=>[e(l(a),null,{default:t(()=>[(u(),y(oe(l(n).isDark?l(Se):l(we))))]),_:1})]),_:1},8,["onClick"]),e(H,{trigger:"click",options:S,onSelect:U},{default:t(()=>[e(g,{quaternary:""},{default:t(()=>[e(A,{size:8},{default:t(()=>[e(l(a),null,{default:t(()=>[e(l(I))]),_:1}),s("span",null,k(P.value),1)]),_:1})]),_:1})]),_:1})]),_:1})])])]),_:1}),e(E,{class:"layout-content","content-style":"padding: 24px;"},{default:t(()=>[e(j)]),_:1})]),_:1})]),_:1})}}},Fe=te(Ue,[["__scopeId","data-v-be0e28ac"]]);export{Fe as default};
