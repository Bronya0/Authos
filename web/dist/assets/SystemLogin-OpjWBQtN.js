import{u as L,r as v,a as x,c as E,b as A,d as a,e as s,w as t,f as l,g as C,o as z,h as d,i as g}from"./index-Bh7ncf5g.js";import{a as N}from"./index-C99W1-_y.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as V}from"./ShieldCheckmark-DJZpUdrC.js";import{P as q}from"./Person-D3lXNcJi.js";import{L as B}from"./LockClosed-BWrVuZJw.js";import{L as I}from"./LogIn-CzypOer1.js";const P={class:"login-container"},U={class:"login-content"},F={class:"login-header"},T={class:"logo-container"},$={class:"logo"},j={class:"card-header"},D={class:"form-actions"},G={__name:"SystemLogin",setup(H){const h=C(),r=L(),f=v(),u=v(!1),n=x({username:"",password:""}),w={username:[{required:!0,message:"请输入管理员账号",trigger:"blur"}],password:[{required:!0,message:"请输入管理员密码",trigger:"blur"}]},y=async()=>{var c,e;try{await((c=f.value)==null?void 0:c.validate()),u.value=!0;try{const o=await N.systemLogin({username:n.username,password:n.password});r.setSystemAuth(o.user,o.token),r.showSuccess("系统管理员登录成功"),h.push("/app-selection")}catch(o){if(console.error("登录错误:",o),o.response){const p=o.response.status,i=((e=o.response.data)==null?void 0:e.message)||"登录失败";p===401?r.showError("账号或密码错误"):r.showError(`登录失败: ${i}`)}else o.request?r.showError("网络错误，请检查后端服务是否启动"):r.showError("请求配置错误")}}catch(o){r.showError(o.message||"登录失败")}finally{u.value=!1}};return(c,e)=>{const o=l("n-icon"),p=l("n-tag"),i=l("n-input"),_=l("n-form-item"),k=l("n-button"),b=l("n-form"),S=l("n-card");return z(),E("div",P,[e[8]||(e[8]=A('<div class="background-animation" data-v-015ee912></div><div class="floating-shapes" data-v-015ee912><div class="shape shape-1" data-v-015ee912></div><div class="shape shape-2" data-v-015ee912></div><div class="shape shape-3" data-v-015ee912></div></div>',2)),a("div",U,[a("div",F,[a("div",T,[a("div",$,[s(o,{size:"48",color:"#fff"},{default:t(()=>[s(d(V))]),_:1})]),e[2]||(e[2]=a("h1",{class:"system-title"},"Authos",-1)),e[3]||(e[3]=a("p",{class:"system-subtitle"},"统一权限管理系统",-1))])]),s(S,{class:"login-card"},{header:t(()=>[a("div",j,[e[5]||(e[5]=a("h2",null,"系统管理员登录",-1)),s(p,{type:"info",size:"small",round:""},{default:t(()=>[...e[4]||(e[4]=[g("安全登录",-1)])]),_:1})])]),default:t(()=>[s(b,{ref_key:"formRef",ref:f,model:n,rules:w,size:"large"},{default:t(()=>[s(_,{path:"username"},{default:t(()=>[s(i,{value:n.username,"onUpdate:value":e[0]||(e[0]=m=>n.username=m),placeholder:"请输入系统管理员账号",clearable:""},{prefix:t(()=>[s(o,{color:"#666"},{default:t(()=>[s(d(q))]),_:1})]),_:1},8,["value"])]),_:1}),s(_,{path:"password"},{default:t(()=>[s(i,{value:n.password,"onUpdate:value":e[1]||(e[1]=m=>n.password=m),type:"password",placeholder:"请输入系统管理员密码","show-password-on":"click",clearable:""},{prefix:t(()=>[s(o,{color:"#666"},{default:t(()=>[s(d(B))]),_:1})]),_:1},8,["value"])]),_:1}),a("div",D,[s(k,{type:"primary",size:"large",loading:u.value,onClick:y,block:""},{icon:t(()=>[s(o,null,{default:t(()=>[s(d(I))]),_:1})]),default:t(()=>[e[6]||(e[6]=g(" 登录系统 ",-1))]),_:1},8,["loading"])])]),_:1},8,["model"])]),_:1}),e[7]||(e[7]=a("div",{class:"login-footer"},[a("p",null,"© 2024 Authos. 保留所有权利.")],-1))])])}}},Y=R(G,[["__scopeId","data-v-015ee912"]]);export{Y as default};
